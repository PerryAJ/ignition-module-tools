buildscript {
    repositories {
        // axion release plugin is not available in gradle plugin portal, add maven central to resolve
        mavenCentral()
    }
}

plugins {
    id "base"
    id "idea"
    id 'pl.allegro.tech.build.axion-release' version '1.12.0'
    id "com.diffplug.spotless" version "5.0.0" apply false
    id 'org.jetbrains.kotlin.jvm' version '1.3.72' apply false
}

version = "0.0.1-SNAPSHOT"

// IncludedBuild cli = gradle.includedBuild('cli')
//
//
// check {
//     dependsOn cli.task(":check")
// }
//
// assemble {
//     dependsOn cli.task(":assemble")
// }
//
// build {
//     dependsOn cli.task(':build')
// }
//
// clean {
//     dependsOn cli.task(":clean")
// }
//
// task test() {
//     dependsOn cli.task(":test")
// }
//
// check {
//     dependsOn cli.task(":check")
// }

wrapper {
    gradleVersion "6.5"
    distributionType org.gradle.api.tasks.wrapper.Wrapper.DistributionType.ALL
    // dependsOn cli.task(":wrapper")
}

task runCli(type: Exec) {
    dependsOn build
    workingDir "$projectDir/module-generator/cli/build/graal"

    commandLine "./ignition-module-gen"
}
